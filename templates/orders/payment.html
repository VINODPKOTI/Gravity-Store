{% extends 'base.html' %}

{% block title %}Payment - Aaramba{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-12 flex justify-center">
    <div class="w-full max-w-md bg-white rounded-xl border border-zinc-200 shadow-sm overflow-hidden">
        <div class="p-6 border-b border-zinc-100 bg-zinc-50/50">
            <h2 class="text-xl font-bold text-zinc-900">Payment Details</h2>
            <p class="text-sm text-zinc-500 mt-1">Order #{{ order.id }}</p>
        </div>

        <div class="p-6 space-y-6">
            <div class="flex justify-between items-center py-4 border-b border-zinc-100">
                <span class="text-zinc-600">Total Amount</span>
                <span class="text-2xl font-bold text-zinc-900">â‚¹{{ order.total_amount }}</span>
            </div>

            {% if error %}
            <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                <strong>Error:</strong> {{ error }}
            </div>
            {% else %}

            <button id="rzp-button1"
                class="w-full flex justify-center items-center gap-2 rounded-md bg-zinc-900 px-4 py-3 text-sm font-semibold text-white shadow hover:bg-zinc-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-900 transition-all">
                <span>Pay Now with Razorpay</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14"></path>
                    <path d="m12 5 7 7-7 7"></path>
                </svg>
            </button>

            <div class="text-center">
                <p class="text-xs text-zinc-400">Secured by Razorpay</p>
            </div>

            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
            <script>
                var options = {
                    "key": "{{ razorpay_key_id }}",
                    "amount": "{{ amount }}",
                    "currency": "{{ currency }}",
                    "name": "Aaramba",
                    "description": "Order #{{ order.id }}",
                    "image": "https://example.com/your_logo", // Replace with actual logo URL if available
                    "order_id": "{{ razorpay_order_id }}",
                    "callback_url": "{{ callback_url }}",
                    "prefill": {
                        "name": "{{ order.user.username }}",
                        "email": "{{ order.user.email }}",
                        "contact": "{{ order.user.phone }}"
                    },
                    "theme": {
                        "color": "#18181b" // zinc-900
                    }
                };
                var rzp1 = new Razorpay(options);
                document.getElementById('rzp-button1').onclick = function (e) {
                    rzp1.open();
                    e.preventDefault();
                }
            </script>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}