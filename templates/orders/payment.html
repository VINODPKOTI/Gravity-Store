{% extends 'base.html' %}

{% block title %}Payment - Aaramba{% endblock %}

{% block content %}
<div class="container" style="margin-top: 50px; max-width: 600px;">
    <div class="card">
        <h2>Payment for Order #{{ order.id }}</h2>
        <p>Total Amount: <strong>${{ order.total_amount }}</strong></p>

        {% if error %}
        <div style="color: red; margin-top: 20px;">
            Error: {{ error }}
        </div>
        {% else %}
        <div style="margin-top: 30px;">
            <button id="rzp-button1" class="btn btn-primary">Pay Now with Razorpay</button>
        </div>

        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <script>
            var options = {
                "key": "{{ razorpay_key_id }}",
                "amount": "{{ amount }}",
                "currency": "{{ currency }}",
                "name": "Aaramba",
                "description": "Order #{{ order.id }}",
                "image": "https://example.com/your_logo",
                "order_id": "{{ razorpay_order_id }}",
                "callback_url": "{{ callback_url }}",
                "prefill": {
                    "name": "{{ order.user.username }}",
                    "email": "{{ order.user.email }}",
                    "contact": "{{ order.user.phone }}"
                },
                "theme": {
                    "color": "#232f3e"
                }
            };
            var rzp1 = new Razorpay(options);
            document.getElementById('rzp-button1').onclick = function (e) {
                rzp1.open();
                e.preventDefault();
            }
        </script>
        {% endif %}
    </div>
</div>
{% endblock %}